<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Di√°ria | Lalai√°</title>

<style>
@font-face{
  font-family:"Rokiest";
  src:url("https://waycompanygg.github.io/roteiro/assets/fonts/Rokiest-Extrabold.otf") format("opentype");
  font-weight:800;
}

:root{
  --bg1:#0b0f19;
  --bg2:#0f172a;
  --card:rgba(11,18,32,.85);
  --stroke:rgba(255,255,255,.12);
  --text:#e5e7eb;
  --muted:rgba(229,231,235,.65);
  --blue:#2563eb;
  --amber:#f59e0b;
  --danger:#ef4444;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:
    radial-gradient(800px 420px at 10% 10%, rgba(245,158,11,.18), transparent 60%),
    radial-gradient(800px 420px at 90% 20%, rgba(37,99,235,.22), transparent 60%),
    linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  padding:22px;
}

.home{
  position:fixed;
  top:16px; left:16px;
  background:rgba(17,24,39,.9);
  border:1px solid var(--stroke);
  padding:10px 14px;
  border-radius:12px;
  font-weight:900;
  text-decoration:none;
  color:#fff;
}

.card{
  width:100%;
  max-width:1000px;
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:20px;
  padding:22px;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
}

h1{
  font-family:"Rokiest";
  margin:0;
  letter-spacing:.8px;
}

.sub{
  margin:6px 0 14px;
  color:var(--muted);
  font-size:13px;
}

/* ===== TOPBAR ===== */
.topbar{
  display:grid;
  grid-template-columns:1fr auto;
  gap:12px;
  margin-top:10px;
}

.leftControls{
  display:flex;
  gap:10px;
  align-items:flex-end;
  flex-wrap:wrap;
}

.fieldMini{
  min-width:220px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

label{font-size:12px;color:var(--muted)}

input,select{
  height:44px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--stroke);
  background:#020617;
  color:#fff;
}

.btn{
  height:44px;
  padding:0 16px;
  border-radius:12px;
  border:0;
  cursor:pointer;
  font-weight:900;
  display:inline-flex;
  align-items:center;
  gap:8px;
}

.btn-blue{background:var(--blue);color:#fff}
.btn-amber{background:var(--amber);color:#000}
.btn-ghost{
  background:rgba(255,255,255,.06);
  color:#fff;
  border:1px solid var(--stroke);
}

.gridHeader,.gridRow{
  display:grid;
  grid-template-columns:1.2fr .6fr .4fr .2fr;
  gap:10px;
  align-items:center;
}

.gridHeader{
  margin-top:18px;
  font-size:12px;
  color:var(--muted);
}

.gridRow{margin-top:10px}

.check{
  display:flex;
  align-items:center;
  gap:8px;
  background:#020617;
  border:1px solid var(--stroke);
  padding:10px 12px;
  border-radius:12px;
}

.remove{
  background:rgba(239,68,68,.2);
  border:1px solid rgba(239,68,68,.4);
  color:#fff;
  border-radius:12px;
  height:44px;
  cursor:pointer;
}

.totalBox{
  margin-top:20px;
  border:1px solid var(--stroke);
  border-radius:16px;
  padding:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}

.total{
  font-family:"Rokiest";
  font-size:30px;
  cursor:pointer;
}

.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:#111827;
  padding:10px 16px;
  border-radius:12px;
  font-weight:900;
  opacity:0;
  transition:.2s;
}
.toast.show{opacity:1}

/* LOGIN */
.login{
  text-align:center;
}
.login input{max-width:300px}

.loader{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:center;
}
.loader div{
  width:60px;height:60px;
  border:4px solid rgba(255,255,255,.2);
  border-top-color:var(--amber);
  border-radius:50%;
  animation:spin .9s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

@media(max-width:900px){
  .topbar{grid-template-columns:1fr}
  .gridHeader,.gridRow{grid-template-columns:1fr}
  .btn,input,select{width:100%}
}
</style>
</head>

<body>

<a class="home" href="index.html">üè† Home</a>

<div class="loader" id="loader"><div></div></div>

<div class="card">
  <h1>Calculadora de Di√°ria</h1>
  <p class="sub">Somar m√∫sicos, aplicar meia di√°ria, multiplicar por dias e copiar total.</p>

  <!-- LOGIN -->
  <div id="login" class="login">
    <input id="pass" type="password" placeholder="Senha admin">
    <br><br>
    <button class="btn btn-amber" onclick="entrar()">üîë Entrar</button>
  </div>

  <!-- APP -->
  <div id="app" style="display:none">

    <div class="topbar">
      <div class="leftControls">
        <button class="btn btn-blue" onclick="add()">‚ûï Adicionar m√∫sico</button>

        <div class="fieldMini">
          <label>Presets</label>
          <select id="preset" onchange="loadPreset()"></select>
        </div>

        <button class="btn btn-ghost" onclick="savePreset()">üíæ Salvar</button>
        <button class="btn btn-ghost" onclick="deletePreset()">üóëÔ∏è</button>
      </div>

      <div class="leftControls">
        <div class="fieldMini" style="min-width:180px">
          <label>Quantidade de dias</label>
          <input id="dias" type="number" min="1" value="1" oninput="calc()">
        </div>
        <button class="btn btn-ghost" onclick="clearAll()">üßπ Limpar</button>
        <button class="btn btn-ghost" onclick="logout()">üö™ Sair</button>
      </div>
    </div>

    <div class="gridHeader">
      <div>M√∫sico</div>
      <div>Valor</div>
      <div>Meia di√°ria</div>
      <div></div>
    </div>

    <div id="rows"></div>

    <div class="totalBox">
      <div>
        <div style="font-size:13px;color:var(--muted)">Total final</div>
        <div style="font-size:12px;color:var(--muted)">Clique para copiar</div>
      </div>
      <div class="total" onclick="copy()">R$ 0,00</div>
    </div>
  </div>
</div>

<div class="toast" id="toast">‚úÖ Copiado!</div>

<script>
const ADMIN="1234";
const STORE="diaria_rows";
const PRESETS="diaria_presets";

function entrar(){
  if(pass.value!==ADMIN) return alert("Senha incorreta");
  loader.style.display="flex";
  setTimeout(()=>{
    loader.style.display="none";
    login.style.display="none";
    app.style.display="block";
    init();
  },900);
}

function logout(){location.reload()}

function init(){
  if(!localStorage.getItem(STORE))
    localStorage.setItem(STORE,JSON.stringify([{n:"",v:"",m:false}]));
  render();
  loadPresetList();
}

function rows(){return JSON.parse(localStorage.getItem(STORE))}
function save(r){localStorage.setItem(STORE,JSON.stringify(r));render()}

function add(){const r=rows();r.push({n:"",v:"",m:false});save(r)}
function remove(i){const r=rows();r.splice(i,1);save(r)}

function render(){
  rowsEl.innerHTML=rows().map((r,i)=>`
    <div class="gridRow">
      <input value="${r.n}" oninput="upd(${i},'n',this.value)">
      <input value="${r.v}" oninput="upd(${i},'v',this.value)">
      <label class="check">
        <input type="checkbox" ${r.m?"checked":""} onchange="upd(${i},'m',this.checked)"> Meia
      </label>
      <button class="remove" onclick="remove(${i})">üóëÔ∏è</button>
    </div>
  `).join("");
  calc();
}

function upd(i,k,v){const r=rows();r[i][k]=v;save(r)}

function calc(){
  const d=parseInt(dias.value||1);
  const t=rows().reduce((a,r)=>a+(parseFloat(r.v||0)*(r.m?.5:1)),0)*d;
  document.querySelector(".total").innerText=t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
}

function copy(){
  navigator.clipboard.writeText(document.querySelector(".total").innerText);
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"),1200);
}

/* PRESETS */
function loadPresetList(){
  const p=JSON.parse(localStorage.getItem(PRESETS)||"{}");
  preset.innerHTML='<option value="">‚Äî Preset ‚Äî</option>'+Object.keys(p).map(k=>`<option>${k}</option>`).join("");
}

function savePreset(){
  const name=prompt("Nome do preset");
  if(!name) return;
  const p=JSON.parse(localStorage.getItem(PRESETS)||"{}");
  p[name]={rows:rows(),dias:dias.value};
  localStorage.setItem(PRESETS,JSON.stringify(p));
  loadPresetList();
}

function loadPreset(){
  const p=JSON.parse(localStorage.getItem(PRESETS)||"{}");
  if(!preset.value) return;
  localStorage.setItem(STORE,JSON.stringify(p[preset.value].rows));
  dias.value=p[preset.value].dias;
  render();
}

function deletePreset(){
  const p=JSON.parse(localStorage.getItem(PRESETS)||"{}");
  if(!preset.value) return;
  delete p[preset.value];
  localStorage.setItem(PRESETS,JSON.stringify(p));
  loadPresetList();
}

function clearAll(){
  localStorage.setItem(STORE,JSON.stringify([{n:"",v:"",m:false}]));
  render();
}

const rowsEl=document.getElementById("rows");
const pass=document.getElementById("pass");
const login=document.getElementById("login");
const app=document.getElementById("app");
const loader=document.getElementById("loader");
const toast=document.getElementById("toast");
const dias=document.getElementById("dias");
const preset=document.getElementById("preset");
</script>

</body>
</html>
